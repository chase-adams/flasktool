{% block body %}
<!DOCTYPE html>
<html lang="en" >
<head>
 <script src='http://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js'></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
  <meta charset="UTF-8">
  <title>Sort and Filter a Table Using Angular</title>
  <link rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/bootswatch/3.2.0/sandstone/bootstrap.min.css'>
<link rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css'>
    <style>
        /*
  were using Bootstrap and Font Awesome
  https://bootstrapcdn.com
*/
body { padding-top:50px; }
      </style>
</head>
<body>
<h1> <center>The LYLE TOOL</center></h1>
<h3><center> Hi  {{session['username']}} </center></h3>

<p><right>
        <a href="/logout" class="btn btn-info btn-lg">
          <span class="glyphicon glyphicon-log-out"></span> Log out
        </a>
      </right></p>
{% raw %}
  <div class="container" ng-app="sortApp" ng-controller="mainController">
  <div class="alert alert-info">
    <p>Sort Type: {{ sortType }}</p>
    <p>Sort Reverse: {{ sortReverse }}</p>
    <p>Search Query: {{ searchFish }}</p>
  </div>
  <form>
    <div class="form-group">
      <div class="input-group">
        <div class="input-group-addon"><i class="fa fa-search"></i></div>
        <input id="d3" type="text" class="form-control" placeholder="Search the key" ng-model="searchFish">
      </div>
    </div>
  </form>
    <div id="yourDiv">
        <table class="table table-bordered table-striped">
    <thead>
    <thead>
      <tr>
        <td>
          <a href="#" ng-click="sortType = 'EntityID'; sortReverse = !sortReverse">
            EntityID
            <span ng-show="sortType == 'EntityID' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'EntityID' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'TEI'; sortReverse = !sortReverse">
            TEI
            <span ng-show="sortType == 'TEI' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'TEI' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>


          <td>
          <a href="#" ng-click="sortType = 'EntityName'; sortReverse = !sortReverse">
          Entity Name
            <span ng-show="sortType == 'EntityName' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'EntityName' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'County'; sortReverse = !sortReverse">
          County
            <span ng-show="sortType == 'County' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'County' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'AOI'; sortReverse = !sortReverse">
          AOI
            <span ng-show="sortType == 'AOI' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'AOI' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'BSL'; sortReverse = !sortReverse">
          BSL
            <span ng-show="sortType == 'BSL' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'BSL' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'BSLWithoutAdjustment'; sortReverse = !sortReverse">
          BSLWithoutAdjustment
            <span ng-show="sortType == 'BSLWithoutAdjustment' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'BSLWithoutAdjustment' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'SumofBSL'; sortReverse = !sortReverse">
          SumofBSL
            <span ng-show="sortType == 'SumofBSL' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'SumofBSL' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
        <td>
          <a href="#" ng-click="sortType = 'NoStateAidDistrict'; sortReverse = !sortReverse">
          NoStateAidFunction
            <span ng-show="sortType == 'NoStateAidDistrict' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'NoStateAidDistrict' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'TotalLocalLevy'; sortReverse = !sortReverse">
          TotalLocalLevy
            <span ng-show="sortType == 'TotalLocalLevy' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'TotalLocalLevy' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'UncapturedQTR'; sortReverse = !sortReverse">
          UncapturedQTR
            <span ng-show="sortType == 'UncapturedQTR' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'UncapturedQTR' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'TotalStateAid'; sortReverse = !sortReverse">
          TotalStateAid
            <span ng-show="sortType == 'TotalStateAid' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'TotalStateAid' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'TotalStateFundingEqualised'; sortReverse = !sortReverse">
          TotalStateFundingEqualised
            <span ng-show="sortType == 'TotalStateFundingEqualised' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'TotalStateFundingEqualised' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>

          <td>
          <a href="#" ng-click="sortType = 'RCL'; sortReverse = !sortReverse">
          RCL
            <span ng-show="sortType == 'RCL' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'RCL' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'TRCL'; sortReverse = !sortReverse">
          TRCL
            <span ng-show="sortType == 'TRCL' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'TRCL' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'DSL'; sortReverse = !sortReverse">
          DSL
            <span ng-show="sortType == 'DSL' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'DSL' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'TSL'; sortReverse = !sortReverse">
          TSL
            <span ng-show="sortType == 'TSL' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'TSL' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'AuditBaseLevelAdjustment'; sortReverse = !sortReverse">
          AuditBaseLevelAdjustment
            <span ng-show="sortType == 'AuditBaseLevelAdjustment' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'AuditBaseLevelAdjustment' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'AdditionalAssistance'; sortReverse = !sortReverse">
          AdditionalAssistance
            <span ng-show="sortType == 'AdditionalAssistance' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'AdditionalAssistance' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'NetworkForFundingPurposes'; sortReverse = !sortReverse">
          NetworkForFundingPurposes
            <span ng-show="sortType == 'NetworkForFundingPurposes' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'NetworkForFundingPurposes' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'DistrictPreKElemReduction'; sortReverse = !sortReverse">
          DistrictPreKElemReduction
            <span ng-show="sortType == 'DistrictPreKElemReduction' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'DistrictPreKElemReduction' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'DistrictHSReduction'; sortReverse = !sortReverse">
          DistrictHSReduction
            <span ng-show="sortType == 'DistrictHSReduction' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'DistrictHSReduction' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'TotalDistrictAAReduction'; sortReverse = !sortReverse">
          TotalDistrictAAReduction
            <span ng-show="sortType == 'TotalDistrictAAReduction' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'TotalDistrictAAReduction' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'TotalFormulaDistrictAA'; sortReverse = !sortReverse">
          TotalFormulaDistrictAA
            <span ng-show="sortType == 'TotalFormulaDistrictAA' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'TotalFormulaDistrictAA' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'TotalNetDistrictAA'; sortReverse = !sortReverse">
          TotalNetDistrictAA
            <span ng-show="sortType == 'TotalNetDistrictAA' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'TotalNetDistrictAA' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'FinalFormulaAAwithReduction'; sortReverse = !sortReverse">
          FinalFormulaAAwithReduction
            <span ng-show="sortType == 'FinalFormulaAAwithReduction' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'FinalFormulaAAwithReduction' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'FinalFormulaAdditionalAssistance'; sortReverse = !sortReverse">
          FinalFormulaAdditionalAssistance
            <span ng-show="sortType == 'FinalFormulaAdditionalAssistance' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'FinalFormulaAdditionalAssistance' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'ElemLL'; sortReverse = !sortReverse">
          ElemLL
            <span ng-show="sortType == 'ElemLL' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'ElemLL' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'HSLL'; sortReverse = !sortReverse">
          HSLL
            <span ng-show="sortType == 'HSLL' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'HSLL' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
         <td>
          <a href="#" ng-click="sortType = 'ElemQTRYield'; sortReverse = !sortReverse">
          ElemQTRYield
            <span ng-show="sortType == 'ElemQTRYield' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'ElemQTRYield' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'ElemTotalStateFormula'; sortReverse = !sortReverse">
          ElemTotalStateFormula
            <span ng-show="sortType == 'ElemTotalStateFormula' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'ElemTotalStateFormula' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
          <td>
          <a href="#" ng-click="sortType = 'ElemAssessedValuation'; sortReverse = !sortReverse">
          ElemAssessedValuation
            <span ng-show="sortType == 'ElemAssessedValuation' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'ElemAssessedValuation' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="roll in sushi | orderBy:sortType:sortReverse | filter:searchFish">
        <td>{{ roll.EntityID }}</td>
          <td>{{ roll.TEI }}</td>
        <td>{{ roll.EntityName }}</td>
          <td>{{ roll.County }}</td>
           <td>{{ roll.AOI }}</td>
           <td>{{ roll.BSL }}</td>
          <td>{{ roll.BSLWithoutAdjustment }}</td>
          <td>{{ roll.SumofBSL }}</td>
        <td>{{ roll.NoStateAidDistrict }}</td>
        <td>{{ roll.TotalLocalLevy }}</td>
          <td>{{ roll.UncapturedQTR }}</td>
          <td>{{ roll.TotalStateAid }}</td>
          <td>{{ roll.TotalStateFundingEqualised}}</td>
          <td>{{ roll.RCL }}</td>
          <td>{{ roll.TRCL }}</td>
          <td>{{ roll.DSL }}</td>
          <td>{{ roll.TSL }}</td>
          <td>{{ roll.AuditBaseLevelAdjustment }}</td>
          <td>{{ roll.AdditionalAssistance }}</td>
          <td>{{ roll.NetworkForFundingPurposes }}</td>
          <td>{{ roll.DistrictPreKElemReduction }}</td>
          <td>{{ roll.DistrictHSReduction }}</td>
          <td>{{ roll.TotalDistrictAAReduction }}</td>
          <td>{{ roll.TotalFormulaDistrictAA }}</td>
          <td>{{ roll.TotalNetDistrictAA }}</td>
          <td>{{ roll.FinalFormulaAAwithReduction }}</td>
          <td>{{ roll.FinalFormulaAdditionalAssistance }}</td>
          <td>{{ roll.ElemLL }}</td>
          <td>{{ roll.HSLL }}</td>
          <td>{{ roll.ElemQTRYield }}</td>
          <td>{{ roll.ElemTotalStateFormula }}</td>
          <td>{{ roll.ElemAssessedValuation }}</td>

      </tr>
    </tbody>
  </table>
</div>
{% endraw %}
</div>
<script type="text/javascript">
    var user = JSON.parse('{{ string1 | tojson| safe}}');
</script>
<script type="text/javascript">
 angular.module('sortApp', [])
.controller('mainController', function($scope) {
  $scope.sortType     = 'EntityID'; // set the default sort type
  $scope.sortReverse  = false;  // set the default sort order
  $scope.searchFish   = '';     // set the default search/filter term
  $scope.sushi        = user ;
  // create the list of sushi rolls
});
function reload(){
    var container = document.getElementById("yourDiv");
    var content1 = container.innerHTML;
    container.innerHTML= content1;
}
    </script>
</body>
</html>
{% endblock %}